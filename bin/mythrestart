#!/bin/bash
sleep 3
echo -n "******* Restarting mythbackend at: " >> /tmp/mythrestart.log
date >> /tmp/mythrestart.log

# restart mythbackend if it gets certain errors. and exit if a new mythbackend is started.
tail -f -c0 /var/log/mythtv/mythbackend.log | awk '/Error: Unable to get handle for port: -1/ {system("/sbin/service mythbackend restart")} ' 

echo -n "******* Restarting mythbackend at: " >> /tmp/mythrestart.log
date >> /tmp/mythrestart.log
#/sbin/service mythbackend restart
#/usr/bin/mythbackend --pidfile /var/run/mythtv/mythbackend.pid >> /home/mythtv/logs/mythbackend.log
